unit U_ItemContaClienteComanda;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, U_LancItemBase, Data.DB, Vcl.StdCtrls,
  Vcl.Buttons, Vcl.ExtCtrls, Vcl.Mask, Vcl.DBCtrls;

type
  Tfrm_ItemContaClienteComanda = class(Tfrm_LancItemBase)
    Panel3: TPanel;
    Label1: TLabel;
    DBText1: TDBText;
    Panel4: TPanel;
    Label8: TLabel;
    btn_ConsProd: TSpeedButton;
    Label7: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label6: TLabel;
    edt_Codigo: TEdit;
    edt_Descricao: TDBEdit;
    edt_Qtde: TDBEdit;
    edt_VlrUnit: TDBEdit;
    edt_VlrTotal: TDBEdit;
    procedure btn_ConfirmaClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frm_ItemContaClienteComanda: Tfrm_ItemContaClienteComanda;

implementation

uses
  DBClient, U_DMRet, U_LancContaCliente, U_PesqProduto, U_BalancaFactory;

{$R *.dfm}

procedure Tfrm_ItemContaClienteComanda.btn_ConfirmaClick(Sender: TObject);
const
  InsertImpressao =
    ' INSERT INTO FILA_IMPRESSAO (FIL_DATA, FIL_TABELA, FIL_ITEMS, FIL_IMPRESSO) '+
	  ' VALUES (:DATA, :FILTABELA, :FIL_ITEMS, :FIL_IMPRESSO) ';
begin
  DMRet.ExecuteSQL(InsertImpressao, [
    DS.DataSet.FieldByName('CON_DT_ABERT').AsDateTime,
      'ITEM_CONTA_CLIENTE', DS_Item.DataSet.FieldByName('ICC_ID').AsInteger, 'N'
  ]);

  inherited;
end;

end.
